# Feedback GPT 
The script calls for ChatGPT and returns the Innential skills with description assign to the problem.

## Docker deployment
1. Install docker 
2. Create `.env` file in `app` project directory
3. Add the following variable inside `.env`: `OPENAI_API_KEY=<your-openai-api-key>` and replace your Open AI key
4. Run `docker build -t myimage .`
5. Run `docker run -d --name mycontainer -p 80:80 myimage`
7. Go to http://127.0.0.1/docs for interactive API to see the results

## Virtual Env installation
1. Checkout to `main` branch
2. Clone repository
3. Create virtual env ```python -m venv venv```
4. Activete virtual env ```source venv/bin/activate```
5. Install the dependencies ```pip install -r requirements.txt```

## Running FastAPI
1. Create `.env` file in project directory
2. Add the following variable inside `.env`: `OPENAI_API_KEY=<your-openai-api-key>` and replace your Open AI key
3. Start FastAPI server `uvicorn main:app --reload`

## Deployment documentation
- Deployments concepts https://fastapi.tiangolo.com/deployment/concepts/
- Docker deployment documentation https://fastapi.tiangolo.com/deployment/docker/

## API interactive documentation
- Interactive API documentation: http://localhost:8000/docs
- ReDoc API documentation: http://localhost:8000/redoc
- OpenAPI JSON schema: http://localhost:8000/openapi.json

## API Endpoints
### Process Message API
- Endpoint `POST /process_message`
- Description: The response will contain the generated feedback skills along with their descriptions
- Request JSON body format:


```
{
  "message": "User input here"
}
```
- Response JSON body format:
```
{
  "Feedback": {
    "Skill 1": "Description 1",
    "Skill 2": "Description 2",
    ...
  },
}
```

### Save Survey API
- Endpoint `PUT /save_survey`
- Description: This API is used to save survey information provided by the user.
- Request JSON body format:

```
{
  "usability": 4,
  "skills_correctness": 3,
  "runtime": 5,
  "comments": "User's comments"
}
```
### Open Survey API
- Endpoint `GET /open_survey`
- Description: This API is used to retrieve saved survey data.
- Response JSON body format:
```
[
  {
    "user_id": "Generated_User_ID",
    "usability": 4,
    "skills_correctness": 3,
    "runtime": 5,
    "comments": "User's comments"
  },
  {
    "user_id": "Generated_User_ID",
    "usability": 3,
    "skills_correctness": 4,
    "runtime": 2,
    "comments": "User's comments"
  },
  ...
]
```

### Health Check API
- Endpoint `GET /healthcheck`
- Description: This API is used to perform a health check and verify the status of the application.
- Response JSON body format:
```
{
  "status": "ok"
}
```

### Get Errors API
- Endpoint `GET /errors`
- Description: This API is used to retrieve a list of errors that occurred during application operations.
- Response JSON body format:
```
[
  {
    "user_ide": user id,
    "timestamp": 1634567890,
    "user_input": "User's input content",
    "function": "Function_name",
    "error_message": "Error message details",
    "traceback": "Error traceback information"
  },
  ...
]
```

### Get Response Info API
- Endpoint `GET /response_info`
- Description: This API is used to save response information generated by the application.
- Response JSON body format:
```
{
  "user_id": "Generated_User_ID",
  "date": "2023-07-27 15:30:00",
  "user_input": "User's input content",
  "gpt_response": "Generated GPT response",
  "gpt_feedback": "Generated GPT feedback",
  "skills": [
    {
      "score": 0.89,
      "skill": "Skill 1"
    },
    {
      "score": 0.76,
      "skill": "Skill 2"
    },
    ...
  ],
  "total_time": 12.45,
  "assign_skills_time": 2.34,
  "total_price": 0.034,
  "total_tokens": 1200,
  "parameters": {
    "gpt_model": "gpt-3.5-turbo",
    "temperature": 0.6,
    "max_tokens": 300,
    "top_p": 0.8,
    "frequency_penalty": 0.2,
    "presence_penalty": 0.1,
    "assign_cutoff": 0.2,
    "z_score_threshold": 2.0
  }
}
```

### Update the tunning Hyperparamaters API
- Endpoint `PUT /update_params`
- Description: This API is used to update the application tuning parameters.
- - Request JSON body format:
```
{
  "model_name": "gpt-3.5-turbo",
  "temperature": 0.6,
  "max_tokens": 300,
  "top_p": 0.8,
  "frequency_penalty": 0.2,
  "presence_penalty": 0.1,
  "assign_cutoff": 0.2,
  "z_score_threshold": 2.0
}
```
- Response JSON
```
{
  "message": "Parameters updated successfully."
}
```

### Reset Hyperparamaters to default API
- Endpoint `PUT /reset_params`
- Description: This API is used to reset the application parameters to their default values.
- Request JSON body format:
```
{
  "message": "Parameters reset to default values."
}

```

